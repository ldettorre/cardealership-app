{% extends 'base.html' %} 
{% load static %}
{% block content %}

<div class="col-sm-12 text-center blog-banner">
    <h1 class="banner-text">Blog</h1>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-3 col-sm-12">
            <div class="blog-archive">
                <p>Post Archive</p>
                <!-- Shoutout to Ramkishore M on SO for the regroup code below -->
            {% regroup blogposts by published_date.year as year_list %}
            <ul>
            {% for year in year_list %}
                <li>{{ year.grouper }}
                    {% regroup year.list by published_date.month as month_list %}
                    <ul>
                    {% for month in month_list %}
                        <li><a href="">{{ month.list.0.published_date|date:'b' }} ({{ month.list|length }}) </a></li>
                    {% endfor %}
                    </ul>
                </li>
            {% endfor %}
            </ul>
            </div>
            <div class="vehicles-opening-div">
                <p class="vehicles-opening-text">Opening Hours<br /> Mon-Fri : 09:00 - 19:00,<br /> Sat : 09:00 - 15:00,<br /> Sun : Closed, <br />Viewing after hours by appointment</p> 
            </div> 
        </div>

        <div class="col-md-9 col-sm-12">
            {% if blogposts %}
            {% for blog in blogposts %}
                    <div class="row no-gutters border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                        <div class="col p-4 d-flex flex-column position-static">
                            <h3 class="mb-0">{{ blog.title }}</h3>
                            <p>{{ blog.published_date }}</p>
                            <div class="mb-1 text-muted">
                            {{ blog.teaser_blurb|safe }}
                            </div>
                            <div class="mb-1 text-muted">
                                {{ blog.content|safe|truncatewords:30 }}
                            </div>
                        </div>
                    </div>
                    <a href="{% url 'blog_post' blog.id %}" class="btn btn-default">Read more</a>
            {% endfor %}
            {% else %}
                <p>There are currently no blog posts published.</p>
            {% endif %}
        </div>
    </div>
</div>
 

    

{% endblock %}